<template>
  <div>
    <b-row>
        <div class="train">
            <div class="svg-icon ">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                    viewBox="0 0 512.001 512.001" style="enable-background:new 0 0 512.001 512.001;" xml:space="preserve">
                    <path d="M486.423,383.791l12.425-12.425c17.537-17.537,17.537-46.072,0-63.609s-46.073-17.537-63.61,0l-31.805,31.805
                        l-83.834-83.549l83.813-83.813l31.805,31.805c8.768,8.769,20.286,13.153,31.805,13.153s23.036-4.384,31.805-13.153
                        c17.536-17.537,17.536-46.072,0-63.609l-12.425-12.425c4.495-2.141,8.709-5.062,12.426-8.778
                        c17.536-17.538,17.536-46.072,0-63.609l-42.407-42.409c-8.496-8.496-19.791-13.174-31.805-13.174s-23.31,4.679-31.805,13.174
                        c-3.668,3.668-6.622,7.861-8.797,12.406l-12.406-12.406c-17.538-17.537-46.072-17.538-63.61,0
                        c-17.536,17.537-17.536,46.072,0,63.609l31.805,31.805l-83.813,83.813l-83.57-83.813l31.805-31.805
                        c17.536-17.537,17.536-46.072,0-63.61c-17.537-17.537-46.073-17.537-63.61,0L128.209,25.58c-2.176-4.545-5.129-8.738-8.797-12.406
                        c-17.537-17.538-46.072-17.537-63.609,0L13.396,55.581c-17.537,17.538-17.536,46.072,0,63.609
                        c3.668,3.668,7.861,6.621,12.406,8.797l-12.406,12.407c-17.537,17.538-17.536,46.072,0,63.609
                        c8.496,8.496,19.791,13.174,31.805,13.174s23.31-4.679,31.805-13.174l31.805-31.805l83.57,83.813l-83.813,83.813L76.763,308.02
                        c-17.537-17.537-46.072-17.538-63.61,0c-17.537,17.537-17.537,46.072,0,63.609l12.425,12.425
                        c-4.495,2.141-8.709,5.062-12.426,8.778c-17.537,17.537-17.537,46.072,0,63.609l42.407,42.407
                        C64.327,507.616,75.846,512,87.363,512c11.519,0,23.036-4.384,31.805-13.153c3.716-3.716,6.637-7.93,8.778-12.425l12.425,12.425
                        c8.768,8.769,20.286,13.153,31.805,13.153c11.519,0,23.036-4.384,31.805-13.153c17.536-17.537,17.536-46.072,0-63.61
                        l-31.805-31.805l83.813-83.813l83.834,83.549l-31.805,31.805c-17.537,17.538-17.536,46.072,0,63.609
                        c8.496,8.496,19.791,13.174,31.805,13.174c12.014,0,23.31-4.679,31.805-13.174l12.425-12.425
                        c2.141,4.495,5.062,8.709,8.778,12.425c8.495,8.495,19.791,13.174,31.805,13.174c12.014,0,23.309-4.679,31.804-13.174
                        l42.407-42.407c17.537-17.537,17.537-46.072,0-63.609C495.132,388.851,490.918,385.932,486.423,383.791z M382.23,360.764
                        c-4.259,4.259-17.766,17.766-21.203,21.203l-21.203-21.203l21.203-21.203L382.23,360.764z M414.014,34.377
                        c5.86-5.859,15.343-5.86,21.203,0l42.407,42.407c5.846,5.846,5.846,15.358,0,21.203c-5.845,5.845-15.355,5.845-21.201,0.003
                        l-42.41-42.41C408.154,49.72,408.154,40.238,414.014,34.377z M329.201,55.58c-5.845-5.845-5.845-15.357,0.001-21.203
                        c2.832-2.832,6.597-4.391,10.601-4.391c4.005,0,7.769,1.559,10.602,4.391c3.709,3.709,81.076,81.078,84.813,84.813
                        c5.288,5.288,37.09,37.09,42.406,42.406c5.846,5.846,5.846,15.358,0,21.203c-5.846,5.845-15.358,5.845-21.204,0
                        C451.465,177.844,332.447,58.825,329.201,55.58z M361.006,129.792c11.449,11.449,13.771,13.771,21.203,21.203l-21.203,21.203
                        l-21.203-21.203L361.006,129.792z M34.599,76.783l42.407-42.406c5.846-5.845,15.358-5.846,21.203,0
                        c5.859,5.859,5.86,15.341,0.001,21.202L55.798,97.992c-5.846,5.84-15.355,5.839-21.199-0.005
                        C28.753,92.141,28.753,82.63,34.599,76.783z M55.803,182.8c-5.846,5.845-15.358,5.846-21.203,0
                        c-5.845-5.846-5.846-15.358,0-21.203c12.037-12.037,74.514-74.514,84.813-84.813c5.3-5.3,37.097-37.098,42.406-42.406
                        c5.845-5.845,15.357-5.846,21.203,0c5.846,5.846,5.846,15.358,0,21.203L55.803,182.8z M130.014,150.995l21.203-21.203
                        l21.203,21.203l-21.203,21.203L130.014,150.995z M172.42,193.401l21.203-21.203l41.164,41.406l-21.203,21.203L172.42,193.401z
                        M97.966,477.645c-5.845,5.845-15.357,5.846-21.203,0l-42.406-42.406c-5.846-5.846-5.846-15.358,0-21.203
                        c2.832-2.832,6.597-4.391,10.601-4.391c4.004,0,7.767,1.559,10.599,4.389l42.411,42.411
                        C103.811,462.29,103.811,471.8,97.966,477.645z M182.777,456.442c5.847,5.845,5.847,15.357,0.002,21.203
                        c-5.846,5.846-15.358,5.846-21.204,0c-9.729-9.729-105.109-105.109-127.219-127.219c-5.846-5.846-5.846-15.358,0-21.203
                        c2.832-2.832,6.597-4.391,10.601-4.391c4.005,0,7.769,1.559,10.602,4.392l63.609,63.609
                        C126.802,400.467,177.361,451.026,182.777,456.442z M150.974,382.23c-8.133-8.133-13.047-13.047-21.203-21.203l21.203-21.203
                        l21.203,21.203L150.974,382.23z M193.38,339.824l-21.203-21.203l146.424-146.423l21.203,21.203L193.38,339.824z M318.622,339.56
                        l-41.428-41.142l21.203-21.203l41.428,41.142L318.622,339.56z M392.831,434.974c-0.002,0.002-0.003,0.003-0.005,0.005
                        l-42.4,42.401c-5.846,5.846-15.358,5.846-21.203,0c-5.846-5.846-5.846-15.358,0-21.203l42.402-42.402
                        c0.001-0.001,0.003-0.003,0.004-0.004l42.406-42.407l0.001-0.001l42.405-42.405c2.924-2.924,6.762-4.384,10.602-4.384
                        c3.839,0,7.679,1.461,10.601,4.384c5.846,5.846,5.846,15.358,0,21.203l-42.402,42.402c-0.002,0.002-0.003,0.003-0.005,0.005
                        L392.831,434.974z M477.645,434.974l-42.407,42.407c-2.832,2.832-6.597,4.391-10.601,4.391c-4.005,0-7.769-1.559-10.602-4.392
                        c-5.844-5.845-5.845-15.355-0.002-21.201l42.411-42.411c2.923-2.922,6.761-4.382,10.599-4.382c3.839,0,7.679,1.461,10.601,4.384
                        C483.49,419.617,483.49,429.129,477.645,434.974z"/>
                </svg>
            </div>
            <h3> Start </h3>
            <router-link :to="'tests'" class="btn btn-link ctm-btm-sin ctm-reg"><span> Test </span></router-link>
            <router-link :to="'warm-ups'" class="btn btn-link ctm-btm-sin ctm-reg"><span> Warm - Up </span></router-link>
            <b-button class="btn btn-link ctm-btm-sin ctm-reg" @click.prevent="testHasCompleted()"><span>  Train </span></b-button>
            <b-modal v-model="showModal"  centered id="ctm-modal-1">
                  <train-modal :status="status" @closeModal="showModal = false"></train-modal>
            </b-modal>
        </div>
    </b-row>
  </div>
</template>
<script>
import { mapState, mapActions } from 'vuex'
import TrainModal from '@/components/TrainModal'

export default {
    name: 'Start',
    components: {
      TrainModal,
    },
    data () {
        return {
            submitted: false,
            showModal: false,
        }
    },
    computed: {
      ...mapState('tests', ['status']),
    },
    methods: {
      ...mapActions('tests', ['testCompleted']),
        testHasCompleted() {
          this.testCompleted().then(() => {
              if (this.status == 'completed') {
                  this.$router.push({ name: 'train' });
              } else {
                  this.showModal = true;
              }
          }).catch((error) => {
              return Promise.reject(error);
          });
        },
    },
  };
</script>
